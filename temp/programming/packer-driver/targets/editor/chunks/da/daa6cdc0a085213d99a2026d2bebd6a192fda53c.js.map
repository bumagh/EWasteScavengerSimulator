{"version":3,"sources":["file:///D:/2work/2GameDev/EWasteScavengerSimulatorCocos2d/assets/Game/scripts-001/ButtonScaler.ts"],"names":["_decorator","Component","Vec3","Button","tween","Input","ccclass","property","ButtonScaler","initScale","button","_scale","_lastScale","_start","onLoad","self","node","scale","getComponent","tweenDown","tewenUp","getScale","to","transDuration","scaleTo","easing","set","onTouchDown","event","start","onTouchUp","stop","on","EventType","TOUCH_START","TOUCH_END","TOUCH_CANCEL","update","equals","setScale"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;AAAmBC,MAAAA,K,OAAAA,K;;;;;;;;;OAC3D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,GADZF,O,qBAAD,MACaE,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAMjCQ,SANiC,GAMrB,IAAIP,IAAJ,EANqB;AAAA,eAOjCQ,MAPiC,GAOT,IAPS;AAAA,eAQhCC,MARgC,GAQvB,IAAIT,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CARuB;AAAA,eAShCU,UATgC,GASnB,IAAIV,IAAJ,EATmB;AAAA,eAUhCW,MAVgC,GAUvB,IAAIX,IAAJ,EAVuB;AAAA;;AAYxC;AACAY,QAAAA,MAAM,GAAG;AACL,cAAIC,IAAI,GAAG,IAAX;AACAA,UAAAA,IAAI,CAACN,SAAL,GAAiB,KAAKO,IAAL,CAAUC,KAA3B;AACAF,UAAAA,IAAI,CAACL,MAAL,GAAcK,IAAI,CAACG,YAAL,CAAkBf,MAAlB,CAAd;AACA,gBAAMgB,SAAS,GAAGf,KAAK,CAAC,KAAKO,MAAN,CAAvB;AACA,gBAAMS,OAAO,GAAGhB,KAAK,CAAC,KAAKO,MAAN,CAArB;AACA,eAAKK,IAAL,CAAUK,QAAV,CAAmB,KAAKR,MAAxB;AACAM,UAAAA,SAAS,CAACG,EAAV,CAAa,KAAKC,aAAlB,EAAiC,KAAKC,OAAtC,EAA+C;AAAEC,YAAAA,MAAM,EAAE;AAAV,WAA/C;AACAL,UAAAA,OAAO,CAACE,EAAR,CAAW,KAAKC,aAAhB,EAA+B,KAAKV,MAApC,EAA4C;AAAEY,YAAAA,MAAM,EAAE;AAAV,WAA5C;;AACA,eAAKb,UAAL,CAAgBc,GAAhB,CAAoB,KAAKf,MAAzB;;AACA,mBAASgB,WAAT,CAAqBC,KAArB,EAAwC;AACpCT,YAAAA,SAAS,CAACU,KAAV;AACH;;AACD,mBAASC,SAAT,CAAmBF,KAAnB,EAAsC;AAClCT,YAAAA,SAAS,CAACY,IAAV;AACAX,YAAAA,OAAO,CAACS,KAAR;AACH;;AACD,eAAKb,IAAL,CAAUgB,EAAV,CAAa3B,KAAK,CAAC4B,SAAN,CAAgBC,WAA7B,EAA0CP,WAA1C,EAAuD,IAAvD;AACA,eAAKX,IAAL,CAAUgB,EAAV,CAAa3B,KAAK,CAAC4B,SAAN,CAAgBE,SAA7B,EAAwCL,SAAxC,EAAmD,IAAnD;AACA,eAAKd,IAAL,CAAUgB,EAAV,CAAa3B,KAAK,CAAC4B,SAAN,CAAgBG,YAA7B,EAA2CN,SAA3C,EAAsD,IAAtD;AACH;;AAEDO,QAAAA,MAAM,GAAG;AACL,cAAG,CAAC,KAAK1B,MAAL,CAAY2B,MAAZ,CAAmB,KAAK1B,UAAxB,CAAJ,EAAwC;AACpC,iBAAKI,IAAL,CAAUuB,QAAV,CAAmB,KAAK5B,MAAxB;;AACA,iBAAKC,UAAL,CAAgBc,GAAhB,CAAoB,KAAKf,MAAzB;AACH;AACJ;;AAxCuC,O,0EACvCJ,Q;;;;;iBACgB,IAAIL,IAAJ,CAAS,GAAT,EAAc,GAAd,EAAmB,GAAnB,C;;wFAChBK,Q;;;;;iBACsB,G","sourcesContent":["import { _decorator, Component, Vec3, Button, tween, EventTouch, Input} from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass\nexport class ButtonScaler extends Component {\n    @property\n    public scaleTo = new Vec3(1.2, 1.2, 1.2);\n    @property\n    public transDuration = 0.2;\n\n    public initScale = new Vec3();\n    public button: Button | null = null;\n    private _scale = new Vec3(1, 1, 1);\n    private _lastScale = new Vec3();\n    private _start = new Vec3();\n\n    // use this for initialization\n    onLoad() {\n        var self = this;\n        self.initScale = this.node.scale;\n        self.button = self.getComponent(Button);\n        const tweenDown = tween(this._scale);\n        const tewenUp = tween(this._scale);\n        this.node.getScale(this._start);\n        tweenDown.to(this.transDuration, this.scaleTo, { easing: 'cubicInOut'});\n        tewenUp.to(this.transDuration, this._start, { easing: 'cubicInOut' });\n        this._lastScale.set(this._scale);\n        function onTouchDown(event: EventTouch) {\n            tweenDown.start();\n        }\n        function onTouchUp(event: EventTouch) {\n            tweenDown.stop();\n            tewenUp.start();\n        }\n        this.node.on(Input.EventType.TOUCH_START, onTouchDown, this);\n        this.node.on(Input.EventType.TOUCH_END, onTouchUp, this);\n        this.node.on(Input.EventType.TOUCH_CANCEL, onTouchUp, this);\n    }\n\n    update() {\n        if(!this._scale.equals(this._lastScale)){\n            this.node.setScale(this._scale);\n            this._lastScale.set(this._scale);\n        }\n    }\n}\n"]}